{% extends 'base.html.twig' %}

{% block title %}Accueil{% endblock %}
{% block css %}
    <link rel="stylesheet" href="{{ asset('css/indexstyle.css') }}">
{% endblock %}
{% block javascripts %}
    <script src="{{ asset('js/index.js') }}"></script>
{% endblock %}

{% block body %}

    <div class="container">
        <div class="row">
            <div class="col-12 text-center">
                <h1 class="fw-bold">Forum Arcade</h1>
            </div>
        </div>

        {# Annonces #}
        <div class="row my-5">
            <h2 class="fw-bold mb-1">Annonce
                {% if is_granted('ROLE_MODERATOR') %}
                    <button class="btn btn-darkblue"><a class="text-white" href="{{ path('create_event') }}">Créer une annonce</a></button>
                {% endif %}
            </h2>
            {% for event in events %}
                <section class="col-12 col-lg-6 mb-3">
                    <article class="border border-dark bg-darkblue shadow-lg p-2 event rounded-3 d-flex flex-column align-items-center justify-content-center">
                    <h3>{{ event.title }}</h3>
                    <p>{{ event.content|slice(0,400) }}</p>
                    </article>
                    <div class="d-grid gap-2 mt-2">
                        <button class="btn btn-block btn-darkblue"><a href="{{ path('view_event') }}">Voir plus</a></button>
                    </div>
                    {% if is_granted('ROLE_MODERATOR') %}
                        <div class="mt-3 text-center">
                            <button class="btn btn-primary">Modifier l'annonce</button>
                            <button class="btn btn-danger">Supprimer l'annonce</button>
                        </div>

                    {% endif %}

                </section>
            {% endfor %}
        </div>

        {# Bloc principal #}
        <div class="row">
            {# Catégories principales#}
            <h2 class="fw-bolder">Catégories</h2>
            <div class="col-12 col-md-8 offset-md-2 col-lg-12 offset-lg-0 ">
                <div class="row pb-4 mb-4 justify-content-lg-start">
                    {% for category in categories %}
                        <div class="col-6 col-md-6 col-lg-2 my-2">
                            <a href="{{ path('category_', {slug: category.slug}) }}">
                                <div class="category w-100 d-flex flex-column justify-content-center bg-lightblue p-1 rounded-3">
                                    <img src="{{ asset('images/categories/' ~ category.image ) }}" class="img-fluid" alt="...">
                                    <div class="category-title mt-1">
                                        <h6 class="text-white fs-6 fs-lg-3">{{ category.title|capitalize }}</h6>
                                    </div>
                                </div>
                            </a>
                        </div>
                    {% else %}
                        <div class="col-6 col-md-6 col-lg-2 my-2">
                            <p class="bg-darkblue rounded-3">Aucune catégorie à afficher !</p>
                        </div>
                    {% endfor %}
                    {% if is_granted('ROLE_MODERATOR') %}
                        <div class="col-12 col-md-6 col-lg-2 my-2 d-flex align-items-center">
                            <a href="{{ path('category_new_category') }}">
                                <button class="btn btn-darkblue">Ajouter une catégorie</button>
                            </a>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="row mt-3">
            {# Flux RSS#}
            <div class="col-12 col-lg-9">
                <h2 class="fw-bolder">Actualités</h2>
                {% for item in rss %}
                    <div class="my-1 wrapper bg-darkblue">
                        <div class="rss-img img my-auto">
                            <img class="img-fluid" src="{{ item.enclosure.attributes.url }}" alt=""><br>
                        </div>
                        <div class="ms-2 text">
                            <h6 class="mb-lg-5 mt-2"><a target="_blank" href="{{ item.link }}">{{ item.title }}</a></h6>
                            <p>{{ item.description }}</p>
                        </div>
                    </div>
                {% endfor %}
            </div>
            {# Aside Statistiques #}
            <div class="col-12 col-lg-3">
                <!-- Aside -->
                <div class="row">
                    <h2 class="fw-bolder">Statistiques</h2>
                    <div class="col-12 p-2">
                        <div class="aside-header bg-darkblue p-2 rounded-1">
                            <h3 class="h6">Membres de l'équipe en ligne</h3>
                        </div>
                        <div class="aside-content">
                            <p class="p-2 admins-connected bg-light text-secondary"></p>
                        </div>
                    </div>
                    <div class="col-12 p-2">
                        <div class="aside-header bg-darkblue p-2 rounded-1">
                            <h3 class="h6">Membres en ligne</h3>
                        </div>
                        <div class="aside-content">
                            <p class="p-2 users-connected bg-light text-secondary"></p>
                        </div>
                    </div>
                    <div class="col-12 p-2">
                        <div class="aside-header bg-darkblue p-2 rounded-1">
                            <h3 class="h6">Statistiques globales</h3>
                        </div>
                        <div class="aside-content">
                            <p class="p-2 bg-light text-secondary">
                                Forums : <span class="forums-number"></span><br>
                                Messages : <span class="comments-number"></span><br>
                                Membres : <span class="users-number"></span>
                            </p>
                        </div>
                    </div>
                    <div class="col-12 p-2">
                </div>
                <div class="row">
                    <div class="aside-header bg-darkblue p-2 rounded-1">
                        <h3 class="h6">Derniers messages publiés</h3>
                    </div>
                    <div class="aside-content">
                        <div class="row">
                            <div class="col-3 aside avatar d-flex align-items-center">
                                <img src="{{ asset('images/logo.jpg') }}" alt="">
                            </div>
                            <div class="col-9 aside">
                                <h6>Titre de caractères 15</h6>
                                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aut, rerum?</p>
                            </div>
                        </div>
                    </div>
                    <div class="aside-content">
                        <div class="row">
                            <div class="col-3 aside avatar d-flex align-items-center">
                                <img src="{{ asset('images/logo.jpg') }}" alt="">
                            </div>
                            <div class="col-9 aside">
                                <h6>Titre de caractères 15</h6>
                                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aut, rerum?</p>
                            </div>
                        </div>
                    </div>
                    <div class="aside-content">
                        <div class="row">
                            <div class="col-3 aside avatar d-flex align-items-center">
                                <img src="{{ asset('images/logo.jpg') }}" alt="">
                            </div>
                            <div class="col-9 aside">
                                <h6>Titre de caractères 15</h6>
                                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aut, rerum?</p>
                            </div>
                        </div>
                    </div>
                    <div class="aside-content">
                        <div class="row">
                            <div class="col-3 aside avatar d-flex align-items-center">
                                <img src="{{ asset('images/logo.jpg') }}" alt="">
                            </div>
                            <div class="col-9 aside">
                                <h6>Titre de caractères 15</h6>
                                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aut, rerum?</p>
                            </div>
                        </div>
                    </div>
                    <div class="aside-content">
                        <div class="row">
                            <div class="col-3 aside avatar d-flex align-items-center">
                                <img src="{{ asset('images/logo.jpg') }}" alt="">
                            </div>
                            <div class="col-9 aside">
                                <h6>Titre de caractères 15</h6>
                                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aut, rerum?</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </div>
{% endblock %}
